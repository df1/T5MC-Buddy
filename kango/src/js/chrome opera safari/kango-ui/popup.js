/*
Built using Kango - Cross-browser extension framework.
http://kangoextensions.com/
*/
var KangoPopup={_container:null,_frame:null,url:'',_getUrl:function(path){return kango.io.getFileUrl(path)},_initMessaging:function(){var frame=this._frame;var listeners=[];window.addEventListener('message',function(event){var message=JSON.parse(event.data);var e={name:message.name,data:message.data,origin:event.origin,source:{dispatchMessage:function(name,data){event.source.postMessage(JSON.stringify({name:name,data:data}),'*');}},target:kango};for(var i=0;i<listeners.length;i++){listeners[i](e);}},false);this.dispatchMessage=function(name,data){frame.postMessage(JSON.stringify({name:name,data:data}),'*');};this.addEventListener=function(type,listener){if(type=='message'){for(var i=0;i<listeners.length;i++){if(listeners[i]==listener){return;}}
listeners.push(listener);}};(new KangoInvokeAsyncModule()).init(this);(new KangoMessageTargetModule()).init(this);var self=this;this.addMessageListener('ClosePopup',function(){self.close();});},_createFrame:function(){var frame=document.createElement('iframe');frame.width='100%';frame.height='100%';frame.src=this.url;this._frame=frame;this._initMessaging();this._container.appendChild(frame);},init:function(){window.kango=this.lang.getGlobalContext().kango;this._container=document.getElementById('container');var details=kango.ui.browserButton.getPopupDetails();this.url=this._getUrl(details.url);if(typeof details.width=='number'){this._container.style.width=details.width+'px';}
if(typeof details.height=='number'){this._container.style.height=details.height+'px';}
var self=this;window.setTimeout(function(){self._createFrame()},50);},close:function(){window.close();},lang:{getGlobalContext:function(){return((function(){return this;}).call(null));},invoke:function(methodName,params){var arr=methodName.split('.');var parent=this.getGlobalContext();var funcName=arr.pop();for(var i=0;i<arr.length;i++){parent=parent[arr[i]];}
return parent[funcName].apply(parent,params);}}};window.addEventListener('DOMContentLoaded',function(){KangoPopup.init()},false);